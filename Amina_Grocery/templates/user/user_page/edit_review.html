{% extends "home/base.html" %}

{% block content %}
<div class="container mt-5">
    <h2>Write a Review</h2>
    <form method="POST" action="{% url 'edit_review' order_id=order_id %}">
        {% csrf_token %}
        
        <div class="mb-3">
            <label for="review" class="form-label">Your Review</label>
            <textarea class="form-control" id="review" name="review" rows="4" placeholder="Write your review here..." required></textarea>
        </div>
        
        <div class="mb-3">
            <label for="rating" class="form-label">Rating</label>
            <select class="form-select" id="rating" name="rating" required>
                <option value="">Select rating</option>
                <option value="1">1 - Very Poor</option>
                <option value="2">2 - Poor</option>
                <option value="3">3 - Average</option>
                <option value="4">4 - Good</option>
                <option value="5">5 - Excellent</option>
            </select>
        </div>
        
        <button type="submit" class="btn btn-primary">Submit Review</button>
    </form>

    <!-- Delete button triggers modal -->
    <div class="d-flex justify-content-center mt-4">
        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#confirmDeleteModal">
            Delete
        </button>
    </div>
</div>

<!-- Custom Bootstrap Modal -->
<div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="confirmDeleteModalLabel">Confirm Delete</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        ⚠️ Are you sure you want to delete this review? This action cannot be undone.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>

        <!-- Call delete_review view -->
        <a href="{% url 'delete_review' order_id=order_id %}" class="btn btn-danger">
            Yes, Delete
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
